@keyframes paper-edge-crumple {
  0% {
    transform: perspective(2000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1);
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
    border-radius: 0px;
    box-shadow: 0 0 0 rgba(0,0,0,0);
  }
  20% {
    transform: perspective(2000px) rotateX(3deg) rotateY(-2deg) rotateZ(1deg) scale(0.98);
    clip-path: polygon(2% 3%, 97% 2%, 98% 97%, 3% 98%);
    border-radius: 2px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }
  40% {
    transform: perspective(2000px) rotateX(-5deg) rotateY(4deg) rotateZ(-2deg) scale(0.94);
    clip-path: polygon(5% 7%, 93% 5%, 95% 93%, 7% 95%);
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  }
  60% {
    transform: perspective(2000px) rotateX(8deg) rotateY(-6deg) rotateZ(3deg) scale(0.88);
    clip-path: polygon(10% 12%, 88% 10%, 90% 88%, 12% 90%);
    border-radius: 15px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
  }
  80% {
    transform: perspective(2000px) rotateX(-12deg) rotateY(9deg) rotateZ(-5deg) scale(0.8);
    clip-path: polygon(18% 20%, 80% 18%, 82% 80%, 20% 82%);
    border-radius: 25px;
    box-shadow: 0 20px 45px rgba(0,0,0,0.25);
  }
  100% {
    transform: perspective(2000px) rotateX(15deg) rotateY(-12deg) rotateZ(7deg) scale(0.7);
    clip-path: polygon(25% 30%, 70% 25%, 75% 70%, 30% 75%);
    border-radius: 35px;
    box-shadow: 0 25px 55px rgba(0,0,0,0.3);
  }
}

@keyframes paper-inward-fold {
  0% {
    transform: perspective(2000px) rotateX(15deg) rotateY(-12deg) rotateZ(7deg) scale(0.7);
    clip-path: polygon(25% 30%, 70% 25%, 75% 70%, 30% 75%);
    border-radius: 35px;
    box-shadow: 0 25px 55px rgba(0,0,0,0.3);
  }
  25% {
    transform: perspective(2000px) rotateX(-25deg) rotateY(20deg) rotateZ(-15deg) scale(0.55);
    clip-path: polygon(35% 40%, 60% 35%, 65% 60%, 40% 65%);
    border-radius: 45px;
    box-shadow: 0 30px 65px rgba(0,0,0,0.4);
  }
  50% {
    transform: perspective(2000px) rotateX(35deg) rotateY(-30deg) rotateZ(25deg) scale(0.4);
    clip-path: polygon(40% 45%, 55% 40%, 60% 55%, 45% 60%);
    border-radius: 55px;
    box-shadow: 0 35px 75px rgba(0,0,0,0.5);
  }
  75% {
    transform: perspective(2000px) rotateX(-50deg) rotateY(45deg) rotateZ(-35deg) scale(0.28);
    clip-path: polygon(43% 47%, 52% 43%, 57% 52%, 47% 57%);
    border-radius: 65px;
    box-shadow: 0 40px 85px rgba(0,0,0,0.6);
  }
  100% {
    transform: perspective(2000px) rotateX(65deg) rotateY(-60deg) rotateZ(45deg) scale(0.18);
    clip-path: polygon(45% 48%, 50% 45%, 55% 50%, 48% 55%);
    border-radius: 50%;
    box-shadow: 0 45px 95px rgba(0,0,0,0.7);
  }
}

@keyframes paper-ball-compression {
  0% {
    transform: perspective(2000px) rotateX(65deg) rotateY(-60deg) rotateZ(45deg) scale(0.18);
    clip-path: polygon(45% 48%, 50% 45%, 55% 50%, 48% 55%);
    border-radius: 50%;
    box-shadow: 0 45px 95px rgba(0,0,0,0.7);
    filter: none;
  }
  30% {
    transform: perspective(2000px) rotateX(180deg) rotateY(120deg) rotateZ(135deg) scale(0.14);
    clip-path: polygon(47% 49%, 49% 47%, 53% 49%, 49% 53%);
    border-radius: 50%;
    box-shadow: 0 35px 75px rgba(0,0,0,0.8);
    filter: contrast(1.1) brightness(0.95);
  }
  60% {
    transform: perspective(2000px) rotateX(360deg) rotateY(-240deg) rotateZ(270deg) scale(0.11);
    clip-path: polygon(48% 49.5%, 49.5% 48%, 51.5% 49.5%, 49.5% 51.5%);
    border-radius: 50%;
    box-shadow: 0 25px 55px rgba(0,0,0,0.85);
    filter: contrast(1.2) brightness(0.9);
  }
  85% {
    transform: perspective(2000px) rotateX(540deg) rotateY(360deg) rotateZ(405deg) scale(0.09);
    clip-path: polygon(49% 49.8%, 49.8% 49%, 50.2% 49.8%, 49.8% 50.2%);
    border-radius: 50%;
    box-shadow: 0 18px 35px rgba(0,0,0,0.9);
    filter: contrast(1.3) brightness(0.85);
  }
  100% {
    transform: perspective(2000px) rotateX(720deg) rotateY(-480deg) rotateZ(540deg) scale(0.08);
    clip-path: circle(1% at 50% 50%);
    border-radius: 50%;
    box-shadow: 0 12px 25px rgba(0,0,0,0.95);
    filter: contrast(1.4) brightness(0.8);
  }
}

@keyframes paper-ball-fall {
  0% {
    transform: perspective(2000px) rotateX(720deg) rotateY(-480deg) rotateZ(540deg) scale(0.08) translate(0, 0);
    clip-path: circle(1% at 50% 50%);
    opacity: 1;
  }
  10% {
    transform: perspective(2000px) rotateX(800deg) rotateY(-530deg) rotateZ(590deg) scale(0.08) translate(var(--fall-x-10), 5vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 1;
  }
  25% {
    transform: perspective(2000px) rotateX(900deg) rotateY(-630deg) rotateZ(680deg) scale(0.08) translate(var(--fall-x-25), 15vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 1;
  }
  50% {
    transform: perspective(2000px) rotateX(1080deg) rotateY(-780deg) rotateZ(815deg) scale(0.08) translate(var(--fall-x-50), 35vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 1;
  }
  75% {
    transform: perspective(2000px) rotateX(1260deg) rotateY(-930deg) rotateZ(950deg) scale(0.08) translate(var(--fall-x-75), 60vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 1;
  }
  90% {
    transform: perspective(2000px) rotateX(1400deg) rotateY(-1080deg) rotateZ(1085deg) scale(0.07) translate(var(--fall-x-90), 85vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 0.8;
  }
  95% {
    transform: perspective(2000px) rotateX(1450deg) rotateY(-1130deg) rotateZ(1120deg) scale(0.06) translate(var(--fall-x-95), 92vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 0.6;
  }
  100% {
    transform: perspective(2000px) rotateX(1500deg) rotateY(-1180deg) rotateZ(1155deg) scale(0.05) translate(var(--fall-x-100), 100vh);
    clip-path: circle(1% at 50% 50%);
    opacity: 0;
  }
}

@keyframes paper-bounce {
  0% {
    transform: perspective(1500px) rotateX(1500deg) rotateY(-1150deg) rotateZ(1015deg) scale(0.05) translate(var(--fall-x-100), 100vh);
    opacity: 0;
  }
  20% {
    transform: perspective(1500px) rotateX(1550deg) rotateY(-1200deg) rotateZ(1050deg) scale(0.04) translate(var(--fall-x-100), 95vh);
    opacity: 0.3;
  }
  40% {
    transform: perspective(1500px) rotateX(1580deg) rotateY(-1230deg) rotateZ(1070deg) scale(0.03) translate(var(--fall-x-100), 98vh);
    opacity: 0.2;
  }
  60% {
    transform: perspective(1500px) rotateX(1600deg) rotateY(-1250deg) rotateZ(1085deg) scale(0.025) translate(var(--fall-x-100), 99vh);
    opacity: 0.1;
  }
  100% {
    transform: perspective(1500px) rotateX(1620deg) rotateY(-1270deg) rotateZ(1100deg) scale(0.02) translate(var(--fall-x-100), 100vh);
    opacity: 0;
  }
}

.paper-surface.crumpling-edge-fold {
  animation: paper-edge-crumple 1s ease-out forwards;
  transform-origin: center center;
}

.paper-surface.crumpling-inward-fold {
  animation: paper-inward-fold 1.2s ease-in-out forwards;
  transform-origin: center center;
}

.paper-surface.crumpling-ball-compression {
  animation: paper-ball-compression 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  transform-origin: center center;
}

.paper-surface.crumpling-ball-fall {
  animation: paper-ball-fall 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  transform-origin: center center;
}

.paper-surface.crumpling-bounce {
  animation: paper-bounce 0.8s ease-out forwards;
  transform-origin: center center;
}

.crumple-button.animating {
  pointer-events: none;
  opacity: 0.6;
}

@media (prefers-reduced-motion: reduce) {
  .paper-surface.crumpling-fold,
  .paper-surface.crumpling-scrunch,
  .paper-surface.crumpling-ball,
  .paper-surface.crumpling-fade {
    animation: none;
    transform: scale(0);
    opacity: 0;
    transition: all 0.3s ease;
  }
}

.paper-reset {
  animation: none !important;
  transform: none !important;
  opacity: 1 !important;
  border-radius: 0 !important;
}